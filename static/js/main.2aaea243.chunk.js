(this.webpackJsonpjlcparts=this.webpackJsonpjlcparts||[]).push([[0],{52:function(e,t,a){e.exports=a(76)},60:function(e,t,a){},76:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(21),c=a.n(o),s=a(17),l=a(3),i=a(4),u=a(6),m=a(5),p=a(31),d=a(7),f=a(23),h=a(48),b=a(49),g=a(50),v=(a(60),a(1)),y=a.n(v),x=a(28),E=a(37),k=a(8),w=a(29);function N(){return C.apply(this,arguments)}function C(){return(C=Object(k.a)(y.a.mark((function e(){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,navigator.storage;case 2:if(e.t1=e.sent,!e.t1){e.next=5;break}e.t1=navigator.storage.persist;case 5:if(e.t0=e.t1,!e.t0){e.next=8;break}e.t0=navigator.storage.persist();case 8:return e.abrupt("return",e.t0);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}window.indexedDB||alert("This page requires IndexedDB to work.\nYour browser does not support it. Please upgrade your browser.");var j=new w.a("jlcparts");function O(e){return e.id}j.version(1).stores({settings:"key",components:"lcsc, category, mfr, *indexWords",categories:"id++,[category+subcategory], subcategory, category"});function S(){return(S=Object(k.a)(y.a.mark((function e(t){var a,n,r;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N();case 2:return t({"Component index":["fetching",!1]}),e.next=5,q("".concat("data","/index.json"),"Cannot fetch categories index: ");case 5:return a=e.sent,n={},r=function(e,a){n[e]=a,t(n)},j.settings.put({key:"lastDbUpdate",value:a.created}),e.next=11,A(a.categories,function(){var e=Object(k.a)(y.a.mark((function e(t,a,n){var o,c;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r(o=t+": "+a,["Adding components 1/2",!1]),e.next=4,U(t,a,n);case 4:return c=e.sent,r(o,["Updating stock 2/2",!1]),e.next=8,H(c);case 8:return r(o,["Added",!0]),e.abrupt("return",c);case 10:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),function(){var e=Object(k.a)(y.a.mark((function e(t,a){var n,o,c,s;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.category,o=t.subcategory,r(c=n+": "+o,["Updating components 1/2",!1]),e.next=6,G(t);case 6:return e.next=8,U(n,o,a);case 8:return s=e.sent,r(c,["Updating stock 2/2",!1]),e.next=12,H(s);case 12:return r(c,["Update finished",!0]),e.abrupt("return",s);case 14:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),function(){var e=Object(k.a)(y.a.mark((function e(t,a){var n,o,c;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.category,o=t.subcategory,r(c=n+": "+o,["Updating stock 1/1",!1]),e.next=6,H(t);case 6:return r(c,["Stock updated",!0]),e.abrupt("return",t);case 8:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),function(){var e=Object(k.a)(y.a.mark((function e(t){var a,n,o;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.category,n=t.subcategory,r(o=a+": "+n,["Removing category",!1]),e.next=6,G(t);case 6:r(o,["Removed",!0]);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function P(){return(P=Object(k.a)(y.a.mark((function e(){var t,a,n;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,q("".concat("data","/index.json"),"Cannot fetch categories index: ");case 2:return t=e.sent,a=!1,n=function(e){return a=!0,e},e.next=7,A(t.categories,n,n,n,n);case 7:return e.abrupt("return",a);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function q(e,t){return I.apply(this,arguments)}function I(){return(I=Object(k.a)(y.a.mark((function e(t,a){var n,r;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t);case 2:if((n=e.sent).ok){e.next=5;break}throw Error(a+n.statusText);case 5:if((r=n.headers.get("Content-Type"))&&-1!==r.indexOf("application/json")){e.next=8;break}throw Error(a+"Response is not JSON, but ".concat(r,": ")+t);case 8:return e.next=10,n.json();case 10:return e.abrupt("return",e.sent);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function D(e,t){return F.apply(this,arguments)}function F(){return(F=Object(k.a)(y.a.mark((function e(t,a){var n;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t);case 2:if((n=e.sent).ok){e.next=5;break}throw Error(a+n.statusText);case 5:return e.next=7,n.text();case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function A(e,t,a,n,r){return R.apply(this,arguments)}function R(){return(R=Object(k.a)(y.a.mark((function e(t,a,n,r,o){var c,l,i,u,m,p;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(c=[],l=new Set,i=function(){for(var e=Object(s.a)(m[u],2),t=e[0],o=e[1],i=function(){var e=Object(s.a)(d[p],2),o=e[0],i=e[1],u=j.categories.where({category:t,subcategory:o}).first(function(){var e=Object(k.a)(y.a.mark((function e(c){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0!==c){e.next=6;break}return e.next=3,a(t,o,i);case 3:c=e.sent,e.next=16;break;case 6:if(i.datahash===c.datahash&&i.sourcename===c.sourcename){e.next=12;break}return e.next=9,n(c,i);case 9:c=e.sent,e.next=16;break;case 12:if(i.stockhash===c.stockhash){e.next=16;break}return e.next=15,r(c);case 15:c=e.sent;case 16:c&&l.add(O(c));case 17:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());c.push(u)},p=0,d=Object.entries(o);p<d.length;p++)i()},u=0,m=Object.entries(t);u<m.length;u++)i();return e.next=6,Promise.all(c);case 6:return e.next=8,j.categories.toArray();case 8:return p=e.sent,e.next=11,Promise.all(p.map(function(){var e=Object(k.a)(y.a.mark((function e(t){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!l.has(O(t))){e.next=2;break}return e.abrupt("return");case 2:o(t);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function M(e,t){return e.reduce((function(e,a,n){return Object(E.a)(Object(E.a)({},e),{},Object(x.a)({},a,t[n]))}),{})}function T(e,t){return L.apply(this,arguments)}function L(){return(L=Object(k.a)(y.a.mark((function e(t,a){var n,r;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.schema,r=a.components.map((function(e){var a=M(n,e);return a.category=O(t),a})),e.next=4,j.components.bulkPut(r);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function U(e,t,a){return B.apply(this,arguments)}function B(){return(B=Object(k.a)(y.a.mark((function e(t,a,n){var r,o;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,q("".concat("data","/").concat(n.sourcename,".json"),"Cannot fetch components for category ".concat(t,": ").concat(a,": "));case 2:return r=e.sent,e.next=5,j.transaction("rw",j.categories,j.components,Object(k.a)(y.a.mark((function e(){var o,c;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.categories.put({category:t,subcategory:a,sourcename:n.sourcename,datahash:n.datahash,stockhash:n.stockhash});case 2:return o=e.sent,e.next=5,j.categories.get(o);case 5:return c=e.sent,e.next=8,T(c,r);case 8:return e.abrupt("return",c);case 9:case"end":return e.stop()}}),e)}))));case 5:return o=e.sent,e.abrupt("return",o);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function H(e){return z.apply(this,arguments)}function z(){return(z=Object(k.a)(y.a.mark((function e(t){var a,n;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,q("".concat("data","/").concat(t.sourcename,".stock.json"),"Cannot fetch stock for category ".concat(t.category,": ").concat(t.subcategory,": "));case 2:return a=e.sent,e.next=5,j.components.where({category:t.id}).modify((function(e){e.stock=a[e.lcsc]}));case 5:return e.next=7,D("".concat("data","/").concat(t.sourcename,".stock.json.sha256"),"Cannot fetch stock hash for category ".concat(t.category,": ").concat(t.subcategory,": "));case 7:return n=e.sent,e.next=10,j.categories.update(O(t),{stockhash:n});case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function G(e){return V.apply(this,arguments)}function V(){return(V=Object(k.a)(y.a.mark((function e(t){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.transaction("rw",j.components,j.categories,Object(k.a)(y.a.mark((function e(){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.components.where({category:O(t)}).delete();case 2:return e.next=4,j.categories.delete(O(t));case 4:case"end":return e.stop()}}),e)}))));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var W=a(24),$=a(12),J=a(10),Q=a(14),_=a(38),K=a(16),Y=a(30),X=a(47);function Z(e){var t,a="sticky top-0 bg-blue-500 mx-1 p-2 border-r-2 rounded";if(e.sortable){a+=" cursor-pointer";var n="sort";"asc"===e.sortDirection&&(n="sort-amount-up"),"desc"===e.sortDirection&&(n="sort-amount-down"),t=r.a.createElement(Q.a,{icon:n})}else t=r.a.createElement(r.a.Fragment,null);return r.a.createElement(r.a.Fragment,null,r.a.createElement("th",{onClick:function(){return e.onClick()},className:a},r.a.createElement("div",{className:"w-full flex"},r.a.createElement("div",{className:"flex-1"},e.header,t),e.onDelete?r.a.createElement("div",{className:"flex-none",onClick:function(t){t.stopPropagation(),e.onDelete()}},r.a.createElement(Q.a,{icon:"times-circle"})):r.a.createElement(r.a.Fragment,null))))}var ee=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).handleHeaderClick=function(e){n.state.sortBy===e?n.setState(Object(J.a)(n.state,(function(e){"asc"===e.sortDirection?e.sortDirection="desc":e.sortDirection="asc"}))):n.setState(Object(J.a)(n.state,(function(t){t.sortBy=e,t.sortDirection="asc"})))},n.getComparator=function(e){var t,a=Object($.a)(n.props.header);try{for(a.s();!(t=a.n()).done;){var r=t.value;if(r.name===e)return r.comparator}}catch(o){a.e(o)}finally{a.f()}},n.getPropAsString=function(e){return n.props[e]?n.props[e]:""},n.rowClassName=function(){return n.getPropAsString("rowClassName")},n.evenRowClassName=function(){return n.getPropAsString("evenRowClassName")},n.oddRowClassName=function(){return n.getPropAsString("oddRowClassName")},n.showMore=function(){n.setState(Object(J.a)(n.state,(function(e){n.state.visibleItems<n.props.data.length&&(e.visibleItems+=50)})))},n.state={sortBy:null,sortDirection:"asc",visibleItems:100},n}return Object(i.a)(a,[{key:"componentDidUpdate",value:function(e){e.data!==this.props.data&&this.setState({visibleItems:100})}},{key:"render",value:function(){var e=this,t=performance.now(),a=Object(W.a)(this.props.data);if(this.state.sortBy){var n,o=this.getComparator(this.state.sortBy);n="desc"===this.state.sortDirection?function(e,t){return-o(e,t)}:o,a.sort(n)}var c=performance.now();return console.log("Sorting took "+(c-t)+" milliseconds."),a=a.slice(0,this.state.visibleItems),r.a.createElement(r.a.Fragment,null,r.a.createElement("table",{className:this.props.className},r.a.createElement("thead",{className:"bg-white"},r.a.createElement("tr",null,this.props.header.map((function(t){var a=null;return e.state.sortBy===t.name&&(a=e.state.sortDirection),r.a.createElement(Z,{key:t.name,header:t.name,sortable:t.sortable,onClick:function(){return e.handleHeaderClick(t.name)},sortDirection:a,onDelete:t.onDelete})})))),r.a.createElement("tbody",null,a.map((function(t,a){var n=e.rowClassName();return n+=a%2===0?" "+e.evenRowClassName():" "+e.oddRowClassName(),r.a.createElement(te,{className:n,key:e.props.keyFun(t),expandableContent:e.props.expandableContent(t)},e.props.header.map((function(e){return r.a.createElement("td",{key:e.name,className:e.className},e.displayGetter(t))})))})))),this.state.visibleItems<this.props.data.length?r.a.createElement("p",{className:"w-full text-center m-4"},"Loading more components..."):r.a.createElement(r.a.Fragment,null),r.a.createElement(X.a,{key:"tableEnd",onEnter:this.showMore}))}}]),a}(r.a.Component),te=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).handleClick=function(e){e.preventDefault(),n.setState(Object(J.a)(n.state,(function(e){e.expanded=!e.expanded})))},n.state={expanded:!1},n}return Object(i.a)(a,[{key:"render",value:function(){var e=r.a.createElement(r.a.Fragment,null),t=this.props.className?this.props.className:"";return this.state.expanded&&this.props.expandableContent&&(e=r.a.createElement("tr",null,r.a.createElement("td",{colSpan:this.props.children.length},this.props.expandableContent))),this.props.expandableContent&&(t+=" cursor-pointer"),r.a.createElement(r.a.Fragment,null,r.a.createElement("tr",{className:t,onClick:this.handleClick},this.props.children),e)}}]),a}(r.a.Component);function ae(e){return["resistance","voltage","current","power","count","capacitance","length","inductance"].includes(e)?ne:function(e,t){return String(e).localeCompare(String(t))}}function ne(e,t){return"NaN"===e&&(e=void 0),"NaN"===t&&(t=void 0),void 0===e&&void 0===t?0:void 0===e?1:void 0===t?-1:e-t}function re(e,t,a){e/=a;var n=Math.floor(e),r=(1e3*(e-n)).toFixed().replace(/0*$/,"");return String(n)+t+r}function oe(e){return function(t){return function(e,t){if("NaN"===e)return"-";if(0===e)return"0\u2009"+t;for(var a,n=[{magnitude:1e-12,prefix:"p"},{magnitude:1e-9,prefix:"n"},{magnitude:1e-6,prefix:"\u03bc"},{magnitude:.001,prefix:"m"},{magnitude:1,prefix:""},{magnitude:1e3,prefix:"k"},{magnitude:1e6,prefix:"M"},{magnitude:1e9,prefix:"G"}],r=0;r<n.length;r++)if(r===n.length-1||Math.abs(e)<n[r+1].magnitude){a=n[r];break}return(e/a.magnitude).toFixed(6).replace(/0*$/,"").replace(/[.,]$/,"")+"\u2009"+a.prefix+t}(t,e)}}function ce(e){return"NaN"===e?"-":0===e?"0R":e<1?(1e3*e).toFixed(6).replace(/0*$/,"").replace(/[.,]$/,"")+"mR":e<1e3?re(e,"R",1):e<1e6?re(e,"k",1e3):e<1e9?re(e,"M",1e6):re(e,"G",1e9)}function se(e,t){var a,n=Object($.a)(t);try{for(n.s();!(a=n.n()).done;){var r=a.value;if(e>=r.qFrom&&(e<=r.qTo||!r.qTo))return r.price}}catch(o){n.e(o)}finally{n.f()}if(t[0])return t[0].price}var le=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).props=e,n.state={},n}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=this;fetch("https://cors-anywhere.herokuapp.com/https://jlcpcb.com/shoppingCart/smtGood/getComponentDetail?componentCode="+this.props.component.lcsc).then((function(t){if(t.ok)return t.json();console.log("Cannot fetch ".concat(e.props.lcsc,": ").concat(t.statusText))})).then((function(t){e.setState({data:t.data})}))}},{key:"price",value:function(){var e=Math.max(parseInt(this.props.quantity)+parseInt(this.state.data.lossNumber),this.state.data.leastNumber);return e*se(e,this.props.component.price)}},{key:"render",value:function(){var e=this.state.data;return e?r.a.createElement("table",{className:"w-full"},e.lossNumber?r.a.createElement("tr",null,r.a.createElement("td",{className:"w-1 whitespace-no-wrap"},"Attrition:"),r.a.createElement("td",{className:"px-2"},e.lossNumber," pcs")):"",e.leastNumber?r.a.createElement("tr",null,r.a.createElement("td",{className:"w-1 whitespace-no-wrap"},"Minimal order quantity:"),r.a.createElement("td",{className:"px-2"},e.leastNumber," pcs")):"",r.a.createElement("tr",null,r.a.createElement("td",{className:"w-1 whitespace-no-wrap"},"Price for ",this.props.quantity," pcs:"),r.a.createElement("td",{className:"px-2"},Math.round(1e3*(this.price()+Number.EPSILON))/1e3," USD"))):""}}]),a}(r.a.Component);function ie(e){if(void 0!==e)return e[0]}function ue(e){if(void 0!==e)return e[1]}function me(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;if(void 0===e&&void 0===t)return 0;if(void 0===e)return 1;if(void 0===t)return-1;void 0===a&&(a=e.primary);var n=ae(ue(e.values[a]));return n(ie(e.values[a]),ie(t.values[a]))}function pe(e){var t=[];for(var a in e)if("sort"!==a){var n=a.split("x").map((function(e){return parseInt(e)})),r=n[0]*n[1];t.push([r,e[a]])}return t.sort((function(e,t){return t-e})),t}function de(e,t){var a,n=function(e){return(e.lcsc+" "+e.mfr+" "+e.description).toLocaleLowerCase()}(e),r=Object($.a)(t);try{for(r.s();!(a=r.n()).done;){var o=a.value;if(!n.includes(o))return!1}}catch(c){r.e(c)}finally{r.f()}return!0}function fe(e){var t=Object.keys(e.values).map((function(e){return"\\${"+e+"}"})),a=new RegExp("("+t.join("|")+")","g");return e.format.replace(a,(function(t){var a=t.slice(2,-1),n=e.values[a];return function(e){var t={resistance:ce,voltage:oe("V"),current:oe("A"),power:oe("W"),capacitance:oe("F"),frequency:oe("Hz"),length:oe("m"),inductance:oe("H"),count:function(e){return String(e)}}[e];return t||function(e){return String(e)}}(n[1])(n[0])}))}function he(e){return JSON.stringify(e)}function be(e,t,a){var n=[],r=0,o=null,c=null,s=!1,l=function l(){if(s)c("Aborted");else{for(var i=a;i--&&r<e.length;)t(e[r])&&n.push(e[r]),++r;r<e.length?setTimeout(l,0):o(n)}};return[new Promise((function(e,t){o=e,c=t,setTimeout(l,0)})),function(){s=!0}]}function ge(){return r.a.createElement("div",{className:"w-full text-center"},r.a.createElement("svg",{className:"animate-spin -ml-1 m-8 h-5 w-5 text-black mx-auto inline-block",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",style:{maxWidth:"100px",maxHeight:"100px",width:"100%",height:"100%"}},r.a.createElement("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),r.a.createElement("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})))}function ve(e){return r.a.createElement("div",{className:"inline text-center ".concat(e.className)},r.a.createElement("svg",{className:"animate-spin h-5 w-5 text-black mx-auto inline-block",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},r.a.createElement("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),r.a.createElement("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})))}Object(J.b)();var ye=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).assignRef=function(e){n.container=e},n.handleMouseEnter=function(){n.setState({hover:!0})},n.handleMouseLeave=function(){n.setState({hover:!1})},n.state={hover:!1},n}return Object(i.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave},r.a.createElement(_.LazyLoadImage,{height:this.props.width,width:this.props.height,src:this.props.src}),this.state.hover?r.a.createElement("div",{className:"z-40 absolute bg-white border-solid border-gray-600 border-2"},r.a.createElement(_.LazyLoadImage,{height:this.props.zoomWidth,width:this.props.zoomHeight,src:this.props.zoomSrc})):r.a.createElement(r.a.Fragment,null))}}]),a}(r.a.Component),xe=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).handleStartComponentsChange=function(){var e=n.state.componentsVersion+1;return n.setState(Object(J.c)(n.state,(function(t){t.expectedComponentsVersion=e}))),e},n.handleComponentsChange=function(e,t){e===n.state.expectedComponentsVersion&&n.setState(Object(J.c)(n.state,(function(a){a.componentsVersion=e,a.components=t;var r,o=performance.now(),c={},s=Object($.a)(n.collectProperties(t));try{for(s.s();!(r=s.n()).done;){var l=r.value;c[l.property]=l.values.map((function(e){return e.key}))}}catch(f){s.e(f)}finally{s.f()}for(var i=0,u=Object.keys(a.activeProperties);i<u.length;i++){var m=u[i];m in c||delete a.activeProperties[m]}for(var p in c)a.activeProperties[p]=c[p];var d=performance.now();console.log("Active categories took ",d-o,"ms")})))},n.handleActivePropertiesChange=function(e,t){n.setState(Object(J.c)(n.state,(function(a){a.activeProperties[e]=t})))},n.handleIncludeInTable=function(e,t){n.setState(Object(J.c)(n.state,(function(a){t?a.tableIncludedProperties.add(e):a.tableIncludedProperties.delete(e)})))},n.handlePropertyRequired=function(e,t){n.setState(Object(J.c)(n.state,(function(a){t?a.requiredProperties.add(e):a.requiredProperties.delete(e)})))},n.handleQuantityChange=function(e){n.setState({quantity:e})},n.handleStockRequired=function(e){n.setState({stockRequired:e})},n.state={components:[],categories:[],activeProperties:{},stockRequired:!1,requiredProperties:new Set,expectedComponentsVersion:0,componentsVersion:0,tableIncludedProperties:new Set,quantity:1},n}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=this;j.categories.toArray().then((function(t){e.setState({categories:e.prepareCategories(t),rawCategories:t})}))}},{key:"prepareCategories",value:function(e){var t,a={},n=Object($.a)(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;void 0===a[r.category]&&(a[r.category]=[]),a[r.category].push({value:r.subcategory,key:r.id})}}catch(l){n.e(l)}finally{n.f()}var o=[];for(var c in a){var s=a[c];s.sort((function(e,t){return e.value.localeCompare(t.value)})),o.push({category:c,subcategories:s})}return o.sort((function(e,t){return e.category.localeCompare(t.category)})),o}},{key:"collectProperties",value:function(e){var t,a={},n=Object($.a)(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;if("attributes"in r){var o=r.attributes;for(var c in o){c in a||(a[c]={});var s=o[c];a[c][he(s)]=s}}}}catch(m){n.e(m)}finally{n.f()}var l=[];for(var i in a)if(!(Object.keys(a[i]).size<=1)){var u=Object.entries(a[i]).map((function(e){return{key:e[0],value:e[1]}}));l.push({property:i,values:u})}return l.sort((function(e,t){return e.property.localeCompare(t.property)})),l}},{key:"filterComponents",value:function(e,t,a){var n=this;return e.filter((function(e){for(var r in t){if(n.state.stockRequired&&e.stock<n.state.quantity)return!1;var o=e.attributes;if(r in o){if(!t[r].includes(he(o[r])))return!1}else if(a.has(r))return!1}return!0}))}},{key:"render",value:function(){var e=this,t=r.a.createElement(r.a.Fragment,null,r.a.createElement(we,{categories:this.state.categories,onChange:this.handleComponentsChange,onAnnounceChange:this.handleStartComponentsChange}),r.a.createElement(Oe,{properties:this.collectProperties(this.state.components),values:this.state.activeProperties,onChange:this.handleActivePropertiesChange,onTableInclude:this.handleIncludeInTable,tableIncluded:Array.from(this.state.tableIncludedProperties),requiredProperties:Array.from(this.state.requiredProperties),onPropertyRequired:this.handlePropertyRequired}),r.a.createElement(Se,{onChange:this.handleQuantityChange,value:this.state.quantity,stockRequired:this.state.stockRequired,onStockRequired:this.handleStockRequired}));if(this.state.expectedComponentsVersion!==this.state.componentsVersion)return r.a.createElement(r.a.Fragment,null,t,r.a.createElement(ge,null));var a,n=[{name:"MFR (click for datasheet)",sortable:!0,displayGetter:function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement(Y.CopyToClipboard,{text:e.mfr},r.a.createElement("button",{className:"py-2 px-4 pl-1",onClick:function(e){return e.stopPropagation()}},r.a.createElement(Q.a,{icon:"clipboard"}))),r.a.createElement("a",{href:e.datasheet,onClick:function(e){return e.stopPropagation()},target:"_blank",rel:"noopener noreferrer"},r.a.createElement(Q.a,{icon:"file-pdf"})," ",e.mfr))},comparator:function(e,t){return e.mfr.localeCompare(t.mfr)},className:"px-1 whitespace-no-wrap"},{name:"LCSC",sortable:!0,className:"px-1 whitespace-no-wrap text-center",displayGetter:function(e){var t=r.a.createElement(r.a.Fragment,null);e.attributes.Status&&("Discontinued"===fe(e.attributes.Status)&&(t=r.a.createElement(Q.a,{icon:"exclamation-triangle",color:"red",className:"mx-2",title:"Warning, this component have been discontinued"})));return r.a.createElement(r.a.Fragment,null,t,r.a.createElement(Y.CopyToClipboard,{text:e.lcsc},r.a.createElement("button",{className:"py-2 px-4 pl-1",onClick:function(e){return e.stopPropagation()}},r.a.createElement(Q.a,{icon:"clipboard"}))),r.a.createElement("a",{href:e.url,className:"underline text-blue-600",onClick:function(e){return e.stopPropagation()},target:"_blank",rel:"noopener noreferrer"},e.lcsc))},comparator:function(e,t){return e.lcsc.localeCompare(t.lcsc)}},{name:"Basic/Extended",sortable:!0,displayGetter:function(e){return fe(e.attributes["Basic/Extended"])[0]},comparator:function(e,t){return fe(e.attributes["Basic/Extended"]).localeCompare(fe(t.attributes["Basic/Extended"]))},className:"text-center"},{name:"Image",sortable:!1,displayGetter:function(e){var t="./brokenimage.svg",a="./brokenimage.svg";if(e.images&&Object.keys(e.images).length>0){var n=pe(e.images);t=n[0][1],a=n[2][1]}return r.a.createElement(ye,{height:90,width:90,src:t,zoomWidth:350,zoomHeight:350,zoomSrc:a})}},{name:"Description",sortable:!0,displayGetter:function(e){return e.description},comparator:function(e,t){return e.description.localeCompare(t.description)}},{name:"Manufacturer",sortable:!0,displayGetter:function(e){return e.manufacturer},comparator:function(e,t){return e.manufacturer.localeCompare(t.manufacturer)}},{name:"Stock",sortable:!0,displayGetter:function(e){return e.stock},comparator:function(e,t){return e.stock-t.stock}},{name:"Price",sortable:!0,displayGetter:function(t){var a=se(e.state.quantity,t.price),n=Math.round(1e3*(a+Number.EPSILON))/1e3,o=Math.round(1e3*(a*e.state.quantity+Number.EPSILON))/1e3;return r.a.createElement(r.a.Fragment,null,"".concat(n,"$/unit"),r.a.createElement("br",null),"".concat(o,"$/").concat(e.state.quantity," units"))},comparator:function(t,a){return se(e.state.quantity,t.price)-se(e.state.quantity,a.price)}}],o=Object($.a)(this.state.tableIncludedProperties);try{var c=function(){var t=a.value;n.push({name:t,sortable:!0,displayGetter:function(e){return t in e.attributes?fe(e.attributes[t]):""},comparator:function(e,a){return me(e.attributes[t],a.attributes[t])},onDelete:function(){return e.handleIncludeInTable(t,!1)},className:"text-center"})};for(o.s();!(a=o.n()).done;)c()}catch(u){o.e(u)}finally{o.f()}var s=performance.now(),l=this.filterComponents(this.state.components,this.state.activeProperties,this.state.requiredProperties),i=performance.now();return console.log("Filtering took ",i-s," ms"),r.a.createElement(r.a.Fragment,null,t,r.a.createElement("div",{className:"w-full flex p-2"},r.a.createElement(K.Link,{activeClass:"active",className:"w-full md:w-1/2 block md:mr-2 bg-gray-500 hover:bg-gray-700 text-black py-1 px-2 rounded text-center",to:"property-select",spy:!0,smooth:!0,duration:100},"\u2191 ",r.a.createElement("span",{className:"text-bold text-green-500"},"\u25a0")," Scroll to properties ",r.a.createElement("span",{className:"text-bold text-green-500"},"\u25a0")," \u2191"),r.a.createElement(K.Link,{activeClass:"active",className:"w-full md:w-1/2 block md:ml-2 bg-gray-500 hover:bg-gray-700 text-black py-1 px-2 rounded text-center",to:"category-select",spy:!0,smooth:!0,duration:100},"\u2191 ",r.a.createElement("span",{className:"text-bold text-red-500"},"\u25a0")," Scroll to search bar ",r.a.createElement("span",{className:"text-bold text-red-500"},"\u25a0")," \u2191")),l.length?r.a.createElement("div",{className:"pt-4",id:"results"},r.a.createElement("div",{className:"w-full flex py-2"},r.a.createElement("p",{className:"flex-none p-2"},"Components matching query: ",l.length),r.a.createElement(Y.CopyToClipboard,{text:l.map((function(e){return"wget ".concat(e.datasheet)})).join("\n")},r.a.createElement("button",{className:"flex-none ml-auto block flex-none bg-blue-500 hover:bg-blue-700 text-black py-1 px-2 rounded",onClick:function(e){return e.stopPropagation()}},"wget all datasheets ",r.a.createElement(Q.a,{icon:"clipboard"})))),r.a.createElement(ee,{className:"w-full",headerClassName:"bg-blue-500",header:n,data:l,evenRowClassName:"bg-gray-100",oddRowClassName:"bg-gray-300",keyFun:function(e){return e.lcsc},expandableContent:function(t){return r.a.createElement(ke,{component:t,categories:e.state.rawCategories,componentQuantity:e.state.quantity})}})):r.a.createElement("div",{className:"p-8 text-center text-lg",id:"results"},"No components match the selected criteria."))}}]),a}(r.a.Component);function Ee(e,t){var a,n=Object($.a)(e);try{for(n.s();!(a=n.n()).done;){var r=a.value;if(r.id===t)return r}}catch(o){n.e(o)}finally{n.f()}return{category:"unknown",subcategory:"unknown"}}function ke(e){var t=e.component,a="./brokenimage.svg";if(t.images&&Object.keys(t.images).length>0){var n=pe(t.images);a=n[n.length-1][1]}var o=Ee(e.categories,t.category);return r.a.createElement("div",{className:"w-full flex flex-wrap pl-6"},r.a.createElement("div",{className:"w-full md:w-1/5 p-3"},r.a.createElement("img",{src:a,alt:"Component ".concat(t.lcsc),className:"w-full mx-auto",style:{maxWidth:"250px"}})),r.a.createElement("div",{className:"w-full md:w-2/5 p-3"},r.a.createElement("table",{className:"w-full"},r.a.createElement("thead",{className:"border-b-2 font-bold"},r.a.createElement("tr",null,r.a.createElement("td",null,"Property"),r.a.createElement("td",null,"Value"))),r.a.createElement("tbody",null,r.a.createElement("tr",{key:"category"},r.a.createElement("td",null,"Category"),r.a.createElement("td",null,o.category,": ",o.subcategory)),Object.keys(t.attributes).reduce((function(e,a){return e.push(r.a.createElement("tr",{key:a},r.a.createElement("td",null,a),r.a.createElement("td",null,fe(t.attributes[a])))),e}),[])))),r.a.createElement("div",{className:"w-full md:w-2/5 p-3"},r.a.createElement("table",{className:"w-full border-b-2"},r.a.createElement("thead",{className:"border-b-2 font-bold"},r.a.createElement("tr",null,r.a.createElement("td",null,"Quantity"),r.a.createElement("td",null,"Unit Price"))),r.a.createElement("tbody",null,t.price.map((function(e,t){return r.a.createElement("tr",{key:t},r.a.createElement("td",null,e.qTo?"".concat(e.qFrom,"-").concat(e.qTo):"".concat(e.qFrom,"+")),r.a.createElement("td",null,e.price," USD"))})))),r.a.createElement(le,{component:t,quantity:e.componentQuantity})))}var we=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).collectActiveCategories=function(){var e=[];for(var t in n.state.categories)e=e.concat(n.state.categories[t]);return e},n.notifyParent=function(){var e=performance.now(),t=n.props.onAnnounceChange();n.components().then((function(a){var r=performance.now();console.log("Select took",r-e,"ms"),n.props.onChange(t,a)}))},n.handleCategoryChange=function(e,t){console.log("Category change"),n.setState(Object(J.c)(n.state,(function(a){a.categories[e]=t.map((function(e){return parseInt(e)})),a.allCategories=!1})),n.notifyParent)},n.selectAll=function(e){var t,a=Object($.a)(n.props.categories);try{for(a.s();!(t=a.n()).done;){var r=t.value;e.categories[r.category]=r.subcategories.map((function(e){return e.key}))}}catch(o){a.e(o)}finally{a.f()}e.allCategories=!0},n.handleSelectAll=function(){n.setState(Object(J.c)(n.state,n.selectAll),n.notifyParent)},n.handleSelectNone=function(){n.setState(Object(J.c)(n.state,(function(e){for(var t in e.categories)e.categories[t]=[];e.allCategories=!1})),n.notifyParent)},n.handleFulltextChange=function(e){n.setState(Object(J.c)(n.state,(function(t){t.searchString=e.target.value,t.allCategories||0!==n.collectActiveCategories().length||n.selectAll(t)})),(function(){clearTimeout(n.searchTimeout),n.searchTimeout=setTimeout(n.notifyParent,350)}))},n.handleClear=function(e){console.log("Here!"),n.setState(Object(J.c)(n.state,(function(e){e.searchString=""})),(function(){console.log("Notifying parent"),n.notifyParent()}))},n.state={categories:{},allCategories:!1,searchString:"",abort:function(){}},n}return Object(i.a)(a,[{key:"components",value:function(){var e=Object(k.a)(y.a.mark((function e(){var t,a,n,r,o,c,l,i,u,m;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.state.abort(),t=this.state.allCategories?j.components:j.components.where("category").anyOf(this.collectActiveCategories()),e.next=4,t.toArray();case 4:if(a=e.sent,0!==this.state.searchString.length){e.next=7;break}return e.abrupt("return",a);case 7:if(0!==(n=this.state.searchString.split(/\s+/).filter((function(e){return e.length>0})).map((function(e){return e.toLocaleLowerCase()}))).length){e.next=10;break}return e.abrupt("return",a);case 10:return console.log("Starting search..."),r=performance.now(),e.next=14,be(a,(function(e){return de(e,n)}),2e3);case 14:return o=e.sent,c=Object(s.a)(o,2),l=c[0],i=c[1],this.setState({abort:i}),e.next=21,l.catch((function(e){return[]}));case 21:return u=e.sent,this.setState({abort:function(){}}),m=performance.now(),console.log("Search took",m-r,"ms"),e.abrupt("return",u);case 26:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"w-full p-2 border-b-2 border-gray-600 bg-gray-200"},r.a.createElement("div",{className:"flex"},r.a.createElement("h3",{className:"block flex-1 text-lg mx-2 font-bold",id:"category-select"},r.a.createElement("span",{className:"text-bold text-red-500"},"\u26f6")," Select category"),r.a.createElement("button",{className:"block flex-none mx-2 bg-blue-500 hover:bg-blue-700 text-black py-1 px-2 rounded",onClick:this.handleSelectAll},"Select all categories"),r.a.createElement("button",{className:"block flex-none mx-2 bg-blue-500 hover:bg-blue-700 text-black py-1 px-2 rounded",onClick:this.handleSelectNone},"Select none")),r.a.createElement("div",{className:"w-full flex p-2"},r.a.createElement("label",{className:"flex-none block py-1 mr-2"},"Contains text:"),r.a.createElement("input",{type:"text",className:"block flex-1 bg-white appearance-none border-2 border-gray-500 rounded w-full py-1 px-4 text-gray-700 leading-tight focus:outline-none focus:bg-white focus:border-blue-500",value:this.state.searchString,onChange:this.handleFulltextChange}),r.a.createElement("button",{className:"flex-none block ml-2 bg-blue-500 hover:bg-blue-700 text-black py-1 px-2 rounded",onClick:this.handleClear},"Clear search")),r.a.createElement("div",{className:"w-full flex p-2"},r.a.createElement(K.Link,{activeClass:"active",className:"w-full md:w-1/2 block md:mr-2 bg-gray-500 hover:bg-gray-700 text-black py-1 px-2 rounded text-center",to:"results",spy:!0,smooth:!0,duration:100},"\u2193 ",r.a.createElement("span",{className:"text-bold text-blue-500"},"\u25a0")," Scroll to results ",r.a.createElement("span",{className:"text-bold text-blue-500"},"\u25a0")," \u2193"),r.a.createElement(K.Link,{activeClass:"active",className:"w-full md:w-1/2 block md:ml-2 bg-gray-500 hover:bg-gray-700 text-black py-1 px-2 rounded text-center",to:"property-select",spy:!0,smooth:!0,duration:100},"\u2193 ",r.a.createElement("span",{className:"text-bold text-green-500"},"\u25a0")," Scroll to properties ",r.a.createElement("span",{className:"text-bold text-green-500"},"\u25a0")," \u2193")),r.a.createElement("div",{className:"flex flex-wrap items-stretch"},this.props.categories.map((function(t){return r.a.createElement(Ne,{className:"bg-blue-500",key:t.category,name:t.category,options:t.subcategories,value:e.state.categories[t.category],onChange:function(a){e.handleCategoryChange(t.category,a)}})}))),r.a.createElement("div",{className:"w-full flex p-2"},r.a.createElement(K.Link,{activeClass:"active",className:"w-full md:w-1/2 block md:mr-2 bg-gray-500 hover:bg-gray-700 text-black py-1 px-2 rounded text-center",to:"results",spy:!0,smooth:!0,duration:100},"\u2193 ",r.a.createElement("span",{className:"text-bold text-blue-500"},"\u25a0")," Scroll to results ",r.a.createElement("span",{className:"text-bold text-blue-500"},"\u25a0")," \u2193"),r.a.createElement(K.Link,{activeClass:"active",className:"w-full md:w-1/2 block md:ml-2 bg-gray-500 hover:bg-gray-700 text-black py-1 px-2 rounded text-center",to:"category-select",spy:!0,smooth:!0,duration:100},"\u2191 ",r.a.createElement("span",{className:"text-bold text-red-500"},"\u25a0")," Scroll to search bar ",r.a.createElement("span",{className:"text-bold text-red-500"},"\u25a0")," \u2191")))}}]),a}(r.a.Component),Ne=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).handleAllClick=function(t){t.preventDefault();var a=e.props.options.map((function(e){return e.key}));e.props.onChange(a)},e.handleNoneClick=function(t){t.preventDefault(),e.props.onChange([])},e.handleSelectChange=function(t){t.preventDefault();var a=Array.from(t.target.selectedOptions,(function(e){return e.value}));e.props.onChange(a)},e}return Object(i.a)(a,[{key:"render",value:function(){var e={};return this.props.minHeight&&(e.minHeight=this.props.minHeight),r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"rounded flex flex-col flex-1 p-1 m-1 ".concat(this.props.className),style:{minWidth:"200px",maxWidth:"400px"}},r.a.createElement("div",{className:"flex-none flex w-full"},r.a.createElement("h5",{className:"block flex-1 font-bold cursor-default rounded px-1 truncate hover:whitespace-normal"},this.props.name),r.a.createElement("div",{className:"flex-none"},r.a.createElement("button",{onClick:this.handleAllClick,className:"mx-2"},"All"),r.a.createElement("button",{onClick:this.handleNoneClick,className:"mx-2"},"None"))),r.a.createElement("select",{multiple:"multiple",className:"flex-1 w-full my-2 p-1",style:e,value:this.props.value,onChange:this.handleSelectChange},this.props.options.map((function(e){return r.a.createElement("option",{value:e.key,key:e.key,title:e.value},e.value)}))),r.a.createElement("div",{className:"flex-none"},this.props.children)))}}]),a}(r.a.Component),Ce=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){return r.a.createElement("select",{className:this.props.className,onChange:this.props.onChange},this.props.options.map((function(e){return r.a.createElement("option",{value:e.key,key:e.key},e.value)})))}}]),a}(r.a.Component),je=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).handleSortChange=function(e){n.setState({sortBy:e.target.value})},n.state={sortBy:n.collectValueTypes()[0].value},n}return Object(i.a)(a,[{key:"collectValueTypes",value:function(){return Object(W.a)(new Set(this.props.item.values.flatMap((function(e){return Object.keys(e.value.values)})))).map((function(e){return{key:e,value:e}}))}},{key:"valueOptions",value:function(){var e=this,t=Object(W.a)(this.props.item.values);return t.sort((function(t,a){return me(t.value,a.value,e.state.sortBy)})),t.map((function(e){return{key:e.key,value:fe(e.value)}}))}},{key:"render",value:function(){var e=this;return this.valueOptions().length<=1?r.a.createElement(r.a.Fragment,null):r.a.createElement(Ne,{className:this.props.className,minHeight:"10em",name:this.props.item.property,options:this.valueOptions(),value:this.props.value,onChange:function(t){e.props.onChange(t)}},r.a.createElement("div",{className:"w-full flex"},r.a.createElement("div",{className:"flex-none"},"Sort by:"),r.a.createElement("div",{className:"flex-1 ml-2"},r.a.createElement(Ce,{className:"w-full rounded bg-white",value:this.state.sortBy,options:this.collectValueTypes(),onChange:this.handleSortChange}))),r.a.createElement("div",{className:"w-full"},r.a.createElement("input",{className:"mr-2 leading-tight",type:"checkbox",checked:this.props.tableIncluded,onChange:function(t){e.props.onTableInclude(t.target.checked)}}),"Table column"),r.a.createElement("div",{className:"w-full"},r.a.createElement("input",{className:"mr-2 leading-tight",type:"checkbox",checked:this.props.required,onChange:function(t){e.props.onPropertyRequired(t.target.checked)}}),"Required"))}}]),a}(r.a.Component),Oe=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"w-full p-2 border-b-2 border-gray-600 bg-gray-200"},r.a.createElement("h3",{className:"block w-full text-lg mx-2 font-bold",id:"property-select"},r.a.createElement("span",{className:"text-bold text-green-500"},"\u26f6")," Property filter"),r.a.createElement("div",{className:"flex flex-wrap items-stretch"},0===this.props.properties.length?r.a.createElement("p",{className:"mx-2"},"There are no properties to select from. Select category or adjust the full-text search to include some components."):this.props.properties.map((function(t){return r.a.createElement(je,{key:t.property,className:"bg-blue-500",item:t,value:e.props.values[t.property],onChange:function(a){return e.props.onChange(t.property,a)},tableIncluded:e.props.tableIncluded.includes(t.property),onTableInclude:function(a){return e.props.onTableInclude(t.property,a)},required:e.props.requiredProperties.includes(t.property),onPropertyRequired:function(a){return e.props.onPropertyRequired(t.property,a)}})}))),r.a.createElement("div",{className:"w-full flex p-2"},r.a.createElement(K.Link,{activeClass:"active",className:"w-full md:w-1/2 block md:mr-2 bg-gray-500 hover:bg-gray-700 text-black py-1 px-2 rounded text-center",to:"results",spy:!0,smooth:!0,duration:100},"\u2193 ",r.a.createElement("span",{className:"text-bold text-blue-500"},"\u25a0")," Scroll to results ",r.a.createElement("span",{className:"text-bold text-blue-500"},"\u25a0")," \u2193"),r.a.createElement(K.Link,{activeClass:"active",className:"w-full md:w-1/2 block md:ml-2 bg-gray-500 hover:bg-gray-700 text-black py-1 px-2 rounded text-center",to:"category-select",spy:!0,smooth:!0,duration:100},"\u2191 ",r.a.createElement("span",{className:"text-bold text-red-500"},"\u25a0")," Scroll to search bar ",r.a.createElement("span",{className:"text-bold text-red-500"},"\u25a0")," \u2191")))}}]),a}(r.a.Component),Se=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"w-full p-2 border-b-2 border-gray-600 bg-gray-200"},r.a.createElement("div",{className:"flex"},r.a.createElement("div",{className:"flex-none py-2 mr-2"},"Specify quantity (for price point selection)"),r.a.createElement("input",{className:"block flex-1 bg-white appearance-none border-2 border-gray-500 rounded w-full py-1 px-4 text-gray-700 leading-tight focus:outline-none focus:bg-white focus:border-blue-500",type:"number",min:1,onChange:function(t){return e.props.onChange(t.target.value)},value:this.props.value}),r.a.createElement("div",{className:"flex-none flex items-center"},r.a.createElement("input",{className:"px-2 ml-3 transform scale-150",type:"checkbox",checked:this.props.stockRequired,onChange:function(t){e.props.onStockRequired(t.target.checked)}}),r.a.createElement("span",{className:"ml-1 py-2 pl-2 leading-none"},"Require on stock ",r.a.createElement("br",null),r.a.createElement("span",{className:"text-gray-600 text-xs"},"(Stock data can be 24 hours old)")))))}}]),a}(r.a.Component);function Pe(e){return r.a.createElement("div",{className:"bg-gray-200 p-2"},r.a.createElement(De,null))}var qe=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={},n}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=this;j.components.get({lcsc:this.props.lcsc}).then((function(t){e.setState({info:t})}))}},{key:"renderImage",value:function(){var e="./brokenimage.svg",t="./brokenimage.svg",a=this.state.info;if(a.images&&Object.keys(a.images).length>0){var n=pe(a.images);e=n[0][1],t=n[2][1]}return r.a.createElement(ye,{height:90,width:90,src:e,zoomWidth:350,zoomHeight:350,zoomSrc:t})}},{key:"renderLoaded",value:function(){var e=this.state.info;console.log(e);var t=se(1,e.price),a=Math.round(1e3*(t+Number.EPSILON))/1e3,n=Ee(this.props.categories,e.category);return r.a.createElement("tr",null,r.a.createElement("td",{className:"text-center"},r.a.createElement("a",{href:e.url,className:"underline text-blue-600",onClick:function(e){return e.stopPropagation()},target:"_blank",rel:"noopener noreferrer"},e.lcsc)),r.a.createElement("td",{className:"text-center"},r.a.createElement("a",{href:e.datasheet,onClick:function(e){return e.stopPropagation()},target:"_blank",rel:"noopener noreferrer"},r.a.createElement(Q.a,{icon:"file-pdf"})," ",e.mfr)),r.a.createElement("td",{className:"text-center"},fe(e.attributes["Basic/Extended"])[0]),r.a.createElement("td",{className:"text-center"},this.renderImage()),r.a.createElement("td",{className:"text-left"},e.description),r.a.createElement("td",{className:"text-left"},n.category,": ",n.subcategory),r.a.createElement("td",{className:"text-left"},"".concat(a,"$/unit")))}},{key:"renderUnknown",value:function(){return r.a.createElement("tr",{className:"text-center"},r.a.createElement("td",{className:"text-center"},this.props.lcsc),r.a.createElement("td",{className:"",colSpan:6},"Component is missing in database. Do you use the latest database?"))}},{key:"render",value:function(){return"info"in this.state&&void 0!==this.state.info?this.renderLoaded():"info"in this.state?this.renderUnknown():r.a.createElement("tr",{className:"text-center"},r.a.createElement("td",{className:"text-center"},this.props.lcsc),r.a.createElement("td",{className:"",colSpan:6},r.a.createElement(ve,null)))}}]),a}(r.a.Component);function Ie(e){return r.a.createElement("table",{className:"w-full bg-white p-2 my-2"},r.a.createElement("thead",{className:"bg-white"},r.a.createElement("tr",null,["LCSC","MFR","Basic/Extended","Image","Description","Category","Price"].map((function(e){return r.a.createElement("th",{key:e,className:"bg-blue-500 mx-1 p-2 border-r-2 rounded"},e)})))),r.a.createElement("tbody",null,e.components.map((function(t){return r.a.createElement(qe,{key:t,lcsc:t,categories:e.categories})}))))}var De=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={},n}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=this;q("https://yaqwsx.github.io/jlcparts/data/changelog.json").then((function(t){var a=[];for(var n in t)a.push({day:new Date(n),components:t[n]});a.sort((function(e,t){return DataTransfer.compare(t,e)})),e.setState({table:a})})),j.categories.toArray().then((function(t){e.setState({categories:t})}))}},{key:"render",value:function(){var e=this;return void 0===this.state.table?r.a.createElement(ge,null):this.state.table.map((function(t){if(0===t.components.lenght)return r.a.createElement(r.a.Fragment,null);var a=t.day;return r.a.createElement("div",{key:t.day},r.a.createElement("h2",{className:"w-full text-lg"},"Newly added components on ",a.getDate(),". ",a.getMonth(),". ",a.getFullYear(),":"),r.a.createElement(Ie,{components:t.components,categories:e.state.categories}))}))}}]),a}(r.a.Component);function Fe(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"w-full px-2 py-8 flex"},r.a.createElement("img",{src:"./favicon.svg",alt:"",className:"block flex-none mr-4 h-auto"}),r.a.createElement("div",{className:"flex-1"},r.a.createElement("h1",{className:"text-4xl font-bold"},"JLC PCB SMD Assembly Component Catalogue"),r.a.createElement("p",null,"Parametric search for components offered by ",r.a.createElement("a",{href:"https://jlcpcb.com"},"JLC PCB")," SMD assembly service."),r.a.createElement("p",null,"Read more at project's ",r.a.createElement("a",{className:"underline text-blue-500 hover:text-blue-800",href:"https://github.com/yaqwsx/jlcparts"},"GitHub page"),"."))),r.a.createElement("div",{className:"rounded my-3 p-2 border-blue-500 border-2"},"Do you enjoy this site? Consider supporting me so I can actively maintain projects like this one! Read more about ",r.a.createElement("a",{className:"underline text-blue-500 hover:text-blue-800",href:"https://github.com/sponsors/yaqwsx"},"my story"),".",r.a.createElement("table",null,r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("td",{className:"pr-2 text-right"},"GitHub Sponsors:"),r.a.createElement("td",null,r.a.createElement("iframe",{src:"https://github.com/sponsors/yaqwsx/button",title:"Sponsor yaqwsx",height:"35",width:"116",style:{border:0},className:"inline-block"}))),r.a.createElement("tr",null,r.a.createElement("td",{className:"pr-2 text-right"},"Ko-Fi:"),r.a.createElement("td",null,r.a.createElement("a",{href:"https://ko-fi.com/E1E2181LU"},r.a.createElement("img",{src:"https://ko-fi.com/img/githubbutton_sm.svg",alt:"Ko-Fi button",className:"inline-block"}))))))))}function Ae(e){return r.a.createElement("div",{className:"w-full p-2 border-t-2 border-gray-800",style:{minHeight:"200px"}})}f.b.add(h.a,b.a,g.a);var Re=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={componentCount:void 0},n}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=this;j.components.count().then((function(t){e.setState({componentCount:t})}))}},{key:"render",value:function(){return void 0===this.state.componentCount||0!==this.state.componentCount?r.a.createElement(r.a.Fragment,null):r.a.createElement("div",{className:"w-full p-8 my-2 bg-yellow-400 rounded"},r.a.createElement("p",null,'Hey, it seems that you run the application for the first time, hence, there\'s no component library in your device. Just press the "Update the component library button" in the upper right corner to download it and use the app.'),r.a.createElement("p",null,"Note that the initial download of the component library might take a while."))}}]),a}(r.a.Component),Me=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={newComponentFormat:!0},n}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=this;j.components.limit(1).first().then((function(t){"object"!==typeof t.attributes[Object.keys(t.attributes)[0]]&&e.setState({newComponentFormat:!1})}))}},{key:"render",value:function(){return this.state.newComponentFormat?r.a.createElement(r.a.Fragment,null):r.a.createElement("div",{className:"w-full p-8 my-2 bg-yellow-400 rounded"},r.a.createElement("p",null,"Hey, there have been some breaking changes to the library format. Please, update the library before continuing to use the tool."))}}]),a}(r.a.Component),Te=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).handleUpdateClick=function(e){e.preventDefault(),n.props.onTriggerUpdate()},n.state={updateAvailable:n.props.updateAvailable},n}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=function(){(function(){return P.apply(this,arguments)})().then((function(t){e.setState({updateAvailable:t})})),j.settings.get("lastUpdate").then((function(t){e.setState({lastUpdate:t})}))};t(),this.timerID=setInterval(t,6e4)}},{key:"componentWillUnmount",value:function(){clearInterval(this.timerID)}},{key:"render",value:function(){return this.state.updateAvailable?r.a.createElement("div",{className:"flex flex-wrap w-full align-middle bg-yellow-400 p-2"},r.a.createElement("p",{className:"inline-block w-full md:w-1/2 py-2"},"There is an update of the component library available."),r.a.createElement("button",{className:"inline-block w-full md:w-1/2 bg-green-500 hover:bg-green-600 py-2 px-4 rounded",onClick:this.handleUpdateClick},"Update the component library")):r.a.createElement("div",{className:"w-full bg-green-400 p-2 text-xs"},r.a.createElement("p",null,"The component database is up to-date ",this.state.lastUpdate?"(".concat(this.state.lastUpdate,")"):"","."))}}]),a}(r.a.Component),Le=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={progress:{}},n}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=performance.now();(function(e){return S.apply(this,arguments)})((function(t){e.setState({progress:t})})).then((function(){var a=performance.now();console.log("Library update took ",a-t,"ms"),e.props.onFinish()}))}},{key:"listItems",value:function(){for(var e=[],t=0,a=Object.entries(this.state.progress);t<a.length;t++){var n=Object(s.a)(a[t],2),o=n[0],c=n[1],l=c[1]?"bg-green-500":"bg-yellow-400";e.push(r.a.createElement("tr",{key:o},r.a.createElement("td",{className:"p-2"},o),r.a.createElement("td",{className:"p-2 ".concat(l)},c[0])))}return e}},{key:"render",value:function(){return r.a.createElement("div",{className:"w-full px-2 py-8"},r.a.createElement("h1",{className:"font-bold text-2xl"},"Update progress:"),r.a.createElement("table",{className:"w-full"},r.a.createElement("thead",null,r.a.createElement("tr",{className:"border-b-2 border-gray-800 font-bold"},r.a.createElement("td",null,"Operation/category"),r.a.createElement("td",null,"Progress"))),r.a.createElement("tbody",null,this.listItems())))}}]),a}(r.a.Component);function Ue(e){return r.a.createElement("div",{className:"container mx-auto px-2"},e.children)}function Be(e){return r.a.createElement("div",{className:"w-ful text-lg"},r.a.createElement(p.b,{to:"/",exact:!0,className:"inline-block p-4 bg-white",activeClassName:"bg-gray-200 font-bold"},"Component search"),r.a.createElement(p.b,{to:"/history",className:"inline-block p-4 bg-white",activeClassName:"bg-gray-200 font-bold"},"Catalog history"))}function He(){return r.a.createElement("p",null,"404 not found")}var ze=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).onUpdateFinish=function(){n.setState({updating:!1})},n.triggerUpdate=function(){n.setState({updating:!0})},n.state={updating:!1},n}return Object(i.a)(a,[{key:"render",value:function(){return this.state.updating?r.a.createElement(Ue,null,r.a.createElement(Le,{onFinish:this.onUpdateFinish})):r.a.createElement(p.a,{basename:"https://yaqwsx.github.io/jlcparts"},r.a.createElement(Ue,null,r.a.createElement(Te,{onTriggerUpdate:this.triggerUpdate}),r.a.createElement(Fe,null),r.a.createElement(Re,null),r.a.createElement(Me,null),r.a.createElement(Be,null),r.a.createElement(d.c,null,r.a.createElement(d.a,{exact:!0,path:"/"},r.a.createElement(xe,null)),r.a.createElement(d.a,{path:"/history",component:Pe}),r.a.createElement(d.a,{path:"*"},r.a.createElement(He,null))),r.a.createElement(Ae,null)))}}]),a}(r.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(ze,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[52,1,2]]]);
//# sourceMappingURL=main.2aaea243.chunk.js.map